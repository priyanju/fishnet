<style type="text/css">
  .th_op_name {
      width: 20%;
  }
  .th_op_id {
      width: 10%;
  }
  .th_mch_name {
      width: 15%;
  }
  .th_mch_id {
      width: 15%;
  }
  .th_shift {
      width: 5%;
  }
  .th_job {
      width: 15%;
  }
  .th_from {
      width: 15%;
  }
  .th_action {
      width: 5%;
  }

  .head-align tr th{
    vertical-align: middle;
    border-bottom: none;
  }

  .card-collapse{
    cursor: pointer;
  }

  .card-collapse thead:hover{
    background-color: #a2a2a2;
    color: #fff;
  }

  .card-collapse thead:hover tr th{
    font-weight: bold;
  }  

  .card-collapse thead a:hover i{
    color: #444;
  } 

  .card-collapse a:hover i{
    color: #f59119;
  }  

  .card-collapse.active{
    -webkit-box-shadow: 0 6px 10px 0 rgba(0,0,0,0.14), 0 1px 18px 0 rgba(0,0,0,0.12), 0 3px 5px -1px rgba(0,0,0,0.3);
    box-shadow: 0 6px 10px 0 rgba(0,0,0,0.14), 0 1px 18px 0 rgba(0,0,0,0.12), 0 3px 5px -1px rgba(0,0,0,0.3);
    margin-bottom: 10px;
    margin-top: 10px;
  }

  .card-collapse thead{
    color: #666;
/*    background-color: #dcdcdc;*/
  }

  .card-collapse thead tr th{
    font-weight: normal;
  }

  .card-collapse.active thead tr th{
    font-weight: bold;
  }

  .card-collapse.active thead{
    color: #fff;
    background-color: #a2a2a2;
  }

  .table-header thead tr th {
    border-bottom: 2px solid #dedada;
    font-size: 16px;
  }

</style>

<div ng-include="'sidebar.html'"></div>
<div class="page home-page active">
  <div ng-include="'header.html'"></div>

  <!-- <section class="updates section-padding section_top" ng-init="clientinit()"> -->
     <section class="statistics section-padding section-no-padding-bottom section_top" ng-init="clientinit()">
     <div ng-include="'breadcrumb.html'"></div>
    <div class="container-fluid">
      <div class="row">


        <div class="col-lg-12">
          <header>
            <div ng-show="myLoader" class="spinner">
              <img src="assets/images/spinner.gif" class="myspin">
            </div>
            <h1 class="h3 display"><i class="fa fa-laptop"></i>Operator Allocation 
                            <a href="" class="btn_add" data-toggle="modal" data-target="#exampleModalLabel2" ng-click="cleandata()"><i class="fa fa-plus" aria-hidden="true"></i></a>
                          </h1>
          </header>
          <!--   <div class="card">
                            <div class="card-block tablescroll">
                                <table class="table table-striped table-sm table_front">
                                    <thead>
                                        <tr>
                                           <th>Operator Name</th>
                                           <th>Operator ID</th>
                                           <th>Machine Name</th>
                                           <th>Machine ID</th>
                                           <th>Shift</th>
                                           <th>Job Description</th>
                                           <th>From date</th>
                                           <th>To date</th>
                                           <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody ng-repeat="operator in operator_alls" ng-click="alocate(operator.id)">
                                    <tr >
                                           <td>{{ operator.operator.operator_name}}</td>
                                           <td>{{ operator.operator.operator_spec_id}}</td>
                                           <td>{{ operator.machine.machine_type}}</td>
                                           <td>{{ operator.machine.machine_name}}</td>
                                           <td>{{operator.shifttransaction.shift_no}}</td>
                                            <td>{{ operator.description }}</td>
                                           <td>{{ operator.from_date}}</td>
                                           <td>{{operator.to_date}}</td>
                                          
                                           <td>
                                                <ul class="item-actions-list">
                                                    <li>
                                                        <a class="remove"> <i class="fa fa-trash-o " confirmed-click="delete(operator.id)"  ng-confirm-click="Do you want to delete"></i> </a>
                                                    </li>
                                                    <li>
                                                        <a class="edit" data-toggle="modal"  data-target="#exampleModalLabel" title="Edit"  ng-click="edit(operator.id)" > <i class="fa fa-pencil"></i> </a>
                                                    </li>
                                                </ul>
                                            </td>
                                        </tr>

                                          <tr ng-repeat="operator in operator_alls" ng-if="operator.id == subid" ng-show = "IsVisible" style="color: #fff;font-weight: bold;background-color: #c2c2c2;">
                                           <td>{{ operator.operator.operator_name}}</td>
                                           <td>{{ operator.operator.operator_spec_id}}</td>
                                           <td>{{ operator.machine.machine_type}}</td>
                                           <td>{{ operator.machine.machine_name}}</td>
                                           <td>{{operator.shifttransaction.shift_no}}</td>
                                            <td>{{ operator.description }}</td>
                                           <td>{{ operator.from_date}}</td>
                                           <td>{{operator.to_date}}</td>
                                          
                                           <td>
                                                <ul class="item-actions-list">
                                                    <li>
                                                        <a class="remove"> <i class="fa fa-trash-o " confirmed-click="delete(operator.id)"  ng-confirm-click="Do you want to delete"></i> </a>
                                                    </li>
                                                    <li>
                                                        <a class="edit" data-toggle="modal"  data-target="#exampleModalLabel" title="Edit"  ng-click="edit(operator.id)" > <i class="fa fa-pencil"></i> </a>
                                                    </li>
                                                </ul>
                                            </td>
                                        </tr>

                                       
                                    </tbody>

                                </table>
                            </div>
                        </div> -->
        </div>
      </div>




      <table class="table head-align table-header">
        <thead>
          <tr>
            <th class="th_op_name">Operator Name</th>
            <th class="th_op_id">Operator ID</th>
            <th class="th_mch_name">Machine Name</th>
            <th class="th_mch_id">Machine ID</th>
            <th class="th_shift">Shift</th>
            <th class="th_job">Description</th>
            <th class="th_from">From-To Date</th>
            <th class="th_action">Action</th>
          </tr>
        </thead>
      </table>

<!--       <div class="row">
        <div class="col-lg-1">Operator Name</div>
        <div class="col-lg-1">Operator ID</div>
        <div class="col-lg-1">Machine Name</div>
        <div class="col-lg-1">Machine ID</div>
        <div class="col-lg-2">Shift</div>
        <div class="col-lg-1">Job Description</div>
        <div class="col-lg-2">From date</div>
        <div class="col-lg-1">To date</div>
        <div class="col-lg-2">action</div>
      </div> -->


      <div class="card card-collapse" ng-repeat="operator in operator_alls"  ng-class="{'active': operator.id == subid && IsVisible}">
        <table class="table table-striped head-align" style="margin-bottom: 0;">
          <thead ng-click="alocate(operator.id)">
            <tr>
              <th class="th_op_name">{{ operator.operator.name}}</th>
              <th class="th_op_id">{{ operator.operator.spec_id}}</th>
              <th class="th_mch_name">{{ operator.machine.machine_type}}</th>
              <th class="th_mch_id">{{ operator.machine.machine_name}}</th>
              <th class="th_shift">{{operator.shift.shift_no}}</th>
              <th class="th_job">{{ operator.description }}</th>
              <th class="th_from">({{ operator.from_date | date:'dd/MM/yyyy'}}) - ({{ operator.to_date | date:'dd/MM/yyyy'}})</th>
              <th class="th_action">
                <a class="remove"> <i class="fa fa-trash-o " confirmed-click="delete(operator.id)" ng-confirm-click="Do you want to delete"></i></a>
              </th>
            </tr>
          </thead>
            <tbody style="background-color: #fff">
              <tr ng-if="operator.id == subid" ng-show="IsVisible" ng-repeat="operator1 in operator.operator_mappings">
                <td>{{ operator1.operator.name}}</td>
                <td>{{ operator1.operator.spec_id}}</td>
                <td>{{ operator.machine.machine_type}}</td>
                <td>{{ operator.machine.machine_name}}</td>
                <td>{{operator.shift.shift_no}}</td>
                <td>{{ operator.description }}</td>
                <td>{{ operator1.date | date:'dd/MM/yyyy'}}</td>
                <td>
                  <a class="edit" data-toggle="modal" ng-show="{{todaydat | date: 'yyyy-MM-dd'}} >= {{operator1.date | date: 'yyyy-MM-dd'}}" data-target="#exampleModalLabel2" title="Edit" ng-click="edit(operator.id,operator1)"> <i class="fa fa-pencil"></i> </a>
                </td>
              </tr>
            </tbody>          
        </table>

<!--         <div class="row">
          <div class="col-lg-1">{{ operator.operator.operator_name}}</div>
          <div class="col-lg-1">{{ operator.operator.operator_spec_id}}</div>
          <div class="col-lg-1">{{ operator.machine.machine_type}}</div>
          <div class="col-lg-1">{{ operator.machine.machine_name}}</div>
          <div class="col-lg-2">{{operator.shifttransaction.shift_no}}</div>
          <div class="col-lg-1">{{ operator.description }}</div>
          <div class="col-lg-2">{{ operator.from_date}}</div>
          <div class="col-lg-1">{{ operator.to_date}}</div>
          <div class="col-lg-2">
            <ul class="item-actions-list">
              <li>
                <a class="remove"> <i class="fa fa-trash-o " confirmed-click="delete(operator.id)" ng-confirm-click="Do you want to delete"></i></a>
              </li>
              <li>
                                                        <a class="edit" data-toggle="modal"  data-target="#exampleModalLabel" title="Edit"  ng-click="edit(operator.id)" > <i class="fa fa-pencil"></i> </a>
                                                    </li>
            </ul>
          </div>
        </div> -->

<!--           <div class="row">
            <div class="col-lg-1">{{ operator1.operator.operator_name}}</div>
            <div class="col-lg-1">{{ operator1.operator.operator_spec_id}}</div>
            <div class="col-lg-1">{{ operator.machine.machine_type}}</div>
            <div class="col-lg-1">{{ operator.machine.machine_name}}</div>
            <div class="col-lg-2">{{operator.shifttransaction.shift_no}}</div>
            <div class="col-lg-1">{{ operator.description }}</div>
            <div class="col-lg-2">{{ operator1.date}}</div>
            <div class="col-lg-1">{{ operator1.date}}</div>
            <div class="col-lg-2">
              <ul class="item-actions-list">

                <li>
                  <a class="edit" data-toggle="modal" data-target="#exampleModalLabel" title="Edit" ng-click="edit(operator.id,operator1)"> <i class="fa fa-pencil"></i> </a>
                </li>
              </ul>
            </div>
          </div> -->

        <div>



        </div>
      </div>
  </section>


  <!-- modal -->
  <div class="modal fade" id="exampleModalLabel2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Operator Registration</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body machine-registration">
          <form name="operatorall">
            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <label>Machine</label>
                  <div class="select">
                    <select name="account" ng-disabled="alloedit == 1" class="form-control" ng-options="mc.id as mc.machine_name for mc in operators.machine" ng-model="operatorassignregistration.machine_id" class="btn btn-default select-width selectpicker form-control">
                      <option value="">Select Machine</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <label>Operator</label>
                  <div class="select">
                    <select name="account" class="form-control" ng-options="operator.id as operator.name for operator in operators.operator" ng-model="operatorassignregistration.operator_id" class="btn btn-default select-width selectpicker form-control">
                      <option value="">Select Operator</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>


            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <label>Shift</label>
                  <div class="select">
                    <select name="account" ng-disabled="alloedit == 1" class="form-control" ng-options="sh.id as sh.shift_no for sh in operators.shift" ng-model="operatorassignregistration.shift_id" class="btn btn-default select-width selectpicker form-control">
                      <option value="" ng-disabled="alloedit == 1">Select Shift</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <label>Description</label>
                  <div class="input-group">
                    <input type="text" ng-readonly="alloedit == 1" class="form-control" ng-model="operatorassignregistration.description">
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group" moment-picker="operatorassignregistration.from_date" ng-show="alloedit == 0" format="YYYY-MM-DD" min-date="startDate">
                  <label>From Date</label>
                  <div class="input-group"><span class="input-group-addon"><i class="fa fa-calendar" aria-hidden="true"></i></span>
                    <input type="text" ng-disabled="alloedit == 1" class="form-control" ng-readonly="alloedit == 1" ng-model="operatorassignregistration.from_date" max-date="operatorassignregistration.from_date">
                  </div>

                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group" ng-show="alloedit == 0" moment-picker="operatorassignregistration.to_date" format="YYYY-MM-DD" min-date="operatorassignregistration.from_date">
                  <label>To Date</label>
                  <div class="input-group"><span class="input-group-addon"><i class="fa fa-calendar" aria-hidden="true"></i></span>
                    <input type="text" ng-disabled="alloedit == 1" class="form-control" ng-required="true" ng-model="operatorassignregistration.to_date">
                  </div>
                </div>
              </div>


              <div class="col-md-6">
                <div class="form-group" ng-show="alloedit == 1" ng-disabled="alloedit == 1" moment-picker="edit_date" format="YYYY-MM-DD" min-date="to_date">
                  <label>Date</label>
                  <div class="input-group"><span class="input-group-addon"><i class="fa fa-calendar" aria-hidden="true"></i></span>
                    <input type="text" ng-disabled="alloedit == 1" class="form-control"  ng-model="edit_date">
                  </div>
                </div>
              </div>
            </div>




          </form>

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" ng-disabled="operatorall.$invalid" ng-click="operatorForm()" data-dismiss="modal">Save</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <div ng-include="'footer.html'"></div>
  </div>
